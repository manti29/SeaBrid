$(function () {
    bindSave()
});
function bindSave() {
    bindEnterHandler($("#re_password"), function () {
        $("#save").click()
    });
    $("#save").click(function () {
        var b = $("#password").val(), c = $("#re_password").val();
        b === c ? $.ajax({
            type: "POST",
            url: "../../../api/account/password_reset/confirm/",
            data: {
                email: $("#email").val(),
                verification: $("#verification").val(),
                password: $("#password").val(),
                re_password: $("#re_password").val()
            }
        }).done(function (a) {
            0 === a.code ? (sysAlert("success", "\u6210\u529f", "\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"), setTimeout(function () {
                window.location.href =
                    "../../../login/"
            }, 1500)) : sysAlert("error", "\u9519\u8bef", "\u5bc6\u7801\u4fee\u6539\u5931\u8d25\uff01[" + a.msg + "]")
        }).fail(function (a) {
            sysAlert("error", "\u9519\u8bef", "\u5bc6\u7801\u4fee\u6539\u5931\u8d25\uff01[" + a.status + " " + a.statusText + "]")
        }) : sysAlert("error", "\u9519\u8bef", "\u4e24\u6b21\u8f93\u5165\u7684\u65b0\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01")
    })
};
