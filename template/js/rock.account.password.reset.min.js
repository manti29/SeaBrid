$(function () {
    bindSubmit()
});
function bindSubmit() {
    bindEnterHandler($("#vcode"), function () {
        $("#submit").click()
    });
    $("#submit").click(function () {
        $.ajax({
            type: "POST",
            url: "../../api/account/password_reset/",
            data: {email: $("#email").val(), vcode: $("#vcode").val()}
        }).done(function (a) {
            0 === a.code ? ($("#email").val(""), sysAlert("success", "\u6210\u529f", "\u60a8\u7684\u8bf7\u6c42\u5df2\u63d0\u4ea4\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u90ae\u7bb1\u3002")) : sysAlert("error", "\u9519\u8bef", "\u8bf7\u6c42\u5931\u8d25\uff01[" + a.msg + "]")
        }).fail(function (a) {
            sysAlert("error",
                "\u9519\u8bef", "\u8bf7\u6c42\u5931\u8d25\uff01[" + a.status + " " + a.statusText + "]")
        }).always(function (a) {
            $("#vcode").val("");
            $("#refresh_vcode").click()
        })
    })
};
