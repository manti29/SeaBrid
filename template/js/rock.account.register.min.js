$(function () {
    bindSave()
});
function bindSave() {
    bindEnterHandler($("#vcode"), function () {
        $("#save").click()
    });
    $("#save").click(function () {
        var b = $("#password").val(), c = $("#re_password").val();
        b === c ? $.ajax({
            type: "POST",
            url: "../../api/account/",
            dataType: "json",
            data: {
                username: $("#username").val(), mobile: $("#mobile").val(),
                password: $("#password").val(), re_password: $("#re_password").val(), vcode: $("#vcode").val()
            }
        }).done(function (a) {
            0 === a.code ? (sysAlert("success", "\u6210\u529f", "\u65b0\u7528\u6237\u6ce8\u518c\u6210\u529f\uff01"), setTimeout(function () {
                    window.location.href = "../../login/"
                },
                1500)) : (sysAlert("error", "\u5931\u8d25", "\u6ce8\u518c\u7528\u6237\u5931\u8d25[" + a.msg + "]"), $("#refresh_vcode").click())
        }).fail(function (a) {
            $("#refresh_vcode").click();
            sysAlert("error", "\u5931\u8d25", "\u6ce8\u518c\u7528\u6237\u5931\u8d25[" + a.status + " " + a.statusText + "]")
        }) : ($("#refresh_vcode").click(), sysAlert("error", "\u5931\u8d25", "\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"))
    })
};
